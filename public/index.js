(()=>{"use strict";var t={436:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Board=void 0,e.Board=class{constructor(t,e,i){this.grid=Array.from({length:i/t},(()=>Array(e/t).fill(0))),this.width=e,this.height=i}addTetromino(t){}checkCollision(t){for(let e=0;e<t.shape.length;e++)for(let i=0;i<t.shape[e].length;i++)if(0!==t.shape[e][i]){const e=t.position.x,i=t.position.y+t.shape.length;if(0===e)return"LEFT";if(e>=this.grid[0].length-t.shape[0].length)return"RIGHT";if(i>=this.grid.length)return"BOTTOM";if(i>=0&&0!==this.grid[i][e])return"BOARD"}return"NONE"}clearFullRows(){}}},154:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const s=i(436),r=i(788),o=i(55);e.Factory=class{static createGame(){return new r.Game}static createBoard(t,e,i){return new s.Board(t,e,i)}static createTetromino(t){return new o.Tetromino(t)}}},788:function(t,e,i){var s,r,o,h,a,n,c,f=this&&this.__classPrivateFieldSet||function(t,e,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(t,i):r?r.value=i:e.set(t,i),i},d=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const l=i(436),u=i(166),w=i(55);class m extends u.GameConfig{constructor(){super(30,300,600),s.add(this),r.set(this,void 0),o.set(this,void 0),h.set(this,void 0),a.set(this,void 0),n.set(this,void 0),f(this,n,0,"f"),f(this,r,document.getElementById("game"),"f"),f(this,o,d(this,r,"f").getContext("2d"),"f"),f(this,h,new l.Board(this.GRID,this.canvas_width,this.canvas_height),"f"),f(this,a,new w.Tetromino({x:3,y:0}),"f")}drawGrid(){for(let t=0;t*this.GRID<this.canvas_height;t++)d(this,o,"f").beginPath(),d(this,o,"f").moveTo(0,t*this.GRID),d(this,o,"f").lineTo(this.canvas_width,t*this.GRID),d(this,o,"f").strokeStyle="lightgray",d(this,o,"f").stroke(),t*this.GRID<this.canvas_height&&(d(this,o,"f").beginPath(),d(this,o,"f").moveTo(t*this.GRID,0),d(this,o,"f").lineTo(t*this.GRID,this.canvas_height),d(this,o,"f").strokeStyle="lightgray",d(this,o,"f").stroke())}drawBlock(t,e){d(this,o,"f").fillStyle="blue",d(this,o,"f").fillRect(t*this.GRID,e*this.GRID,this.GRID,this.GRID),d(this,o,"f").strokeStyle="black",d(this,o,"f").strokeRect(t*this.GRID,e*this.GRID,this.GRID,this.GRID)}draw(){d(this,o,"f").clearRect(0,0,this.canvas_width,this.canvas_height),d(this,h,"f").grid.forEach(((t,e)=>{t.forEach(((t,i)=>{0!==t&&this.drawBlock(i,e)}))})),d(this,a,"f")&&d(this,a,"f").shape.forEach(((t,e)=>{t.forEach(((t,i)=>{0!==t&&this.drawBlock(d(this,a,"f").position.x+i,d(this,a,"f").position.y+e)}))}))}runGame(){window.requestAnimationFrame(d(this,s,"m",c).bind(this))}}e.Game=m,r=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakSet,c=function t(){var e;window.requestAnimationFrame(d(this,s,"m",t).bind(this)),f(this,n,(e=d(this,n,"f"),++e),"f")<64||(d(this,o,"f").clearRect(0,0,d(this,r,"f").width,d(this,r,"f").height),this.draw(),this.drawGrid(),f(this,n,0,"f"),"BOTTOM"!==d(this,h,"f").checkCollision(d(this,a,"f"))&&d(this,a,"f").moveDown())}},166:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameConfig=void 0,e.GameConfig=class{constructor(t,e,i){this.GRID=t,this.canvas_width=e,this.canvas_height=i}}},55:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tetromino=void 0,e.Tetromino=class{constructor(t){this.TETROMINO_SHAPES=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]]],this.shape=this.createRandomTetromino(),this.position=t}get x(){return this.position.x}get y(){return this.position.y}createRandomTetromino(){const t=Math.floor(7*Math.random());return this.TETROMINO_SHAPES[t]}rotate(){this.shape=this.shape[0].map(((t,e)=>this.shape.map((t=>t[e])).reverse()))}moveLeft(){this.position.x-=1}moveRight(){this.position.x+=1}moveDown(){this.position.y+=1}}}},e={};(function i(s){var r=e[s];if(void 0!==r)return r.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports})(154).Factory.createGame().runGame()})();